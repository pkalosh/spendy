{% extends "partials/dashboard-base.html" %}
{% load static %}
{% load humanize %}
{% block content %}
<!-- Include Chart.js for modern charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
--primary-color: #98e23f;
--secondary-color: #7ab82c;
--success-color: #10b981;
--warning-color: #f59e0b;
--danger-color: #ef4444;
--info-color: #06b6d4;
--light-bg: #f8fafc;
--dark-text: #1f2937;
--muted-text: #6b7280;
--border-color: #e5e7eb;
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
--border-radius: 16px; /* Increased for modern rounded look */
--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
--glass-bg: rgba(255, 255, 255, 0.8);
--glass-border: rgba(255, 255, 255, 0.2);
}
body {
background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}
.dashboard-section {
min-height: 100vh;
background: transparent;
}
.custom-dropdown-menu {
z-index: 1055; /* Increased z-index for visibility over modals/tables */
border: none;
box-shadow: var(--shadow-lg);
border-radius: 12px;
backdrop-filter: blur(20px); /* Enhanced blur for modern glassmorphism */
background: var(--glass-bg);
border: 1px solid var(--glass-border);
min-width: 200px;
}
.modal-content {
border: none;
border-radius: var(--border-radius);
box-shadow: var(--shadow-lg);
backdrop-filter: blur(20px);
background: var(--glass-bg);
border: 1px solid var(--glass-border);
}
/* Header Section - Modern Glassmorphism */
.dashboard-header {
background: var(--glass-bg);
backdrop-filter: blur(20px);
border-radius: var(--border-radius);
padding: 2rem;
margin-bottom: 2rem;
margin-top: 4rem;
box-shadow: var(--shadow-md);
border: 1px solid var(--glass-border);
position: relative;
overflow: hidden;
}
.dashboard-header::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 4px;
height: 100%;
background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
z-index: 1;
}
.welcome-title {
font-size: 2rem; /* Larger for modern impact */
font-weight: 800;
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 0.5rem;
position: relative;
z-index: 2;
}
.welcome-subtitle {
color: var(--muted-text);
font-size: 1.125rem;
position: relative;
z-index: 2;
}
/* Modern Balance Display - Glass Card */
.balance-display {
background: var(--glass-bg);
backdrop-filter: blur(20px);
border: 1px solid var(--glass-border);
color: var(--dark-text);
padding: 2rem;
border-radius: var(--border-radius);
text-align: center;
box-shadow: var(--shadow-md);
transition: var(--transition);
min-height: 120px;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
gap: 0.75rem;
position: relative;
overflow: hidden;
}
.balance-display::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 2px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
}
.balance-display:hover {
transform: translateY(-4px);
box-shadow: var(--shadow-lg);
border-color: rgba(152, 226, 63, 0.3);
}
.balance-amount {
font-size: 2.5rem; /* Larger balance */
font-weight: 800;
color: var(--primary-color);
display: block;
margin-bottom: 0.25rem;
}
.balance-label {
font-size: 1rem;
opacity: 0.8;
font-weight: 500;
}
/* Donut Chart Containers - Modern Mini Charts */
.donut-chart-container {
position: relative;
width: 100px;
height: 100px;
margin: 0 auto;
}
.donut-chart-container canvas {
border-radius: 50%;
box-shadow: var(--shadow-sm);
}
/* Section Titles - Modern with Icons */
.section-title {
position: relative;
display: inline-flex;
align-items: center;
font-size: 1.5rem;
font-weight: 700;
color: var(--dark-text);
margin-bottom: 1rem;
gap: 0.5rem;
}
.section-title i {
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
font-size: 1.25rem;
}
.section-subtitle {
color: var(--muted-text);
font-size: 0.95rem;
margin-bottom: 0;
font-weight: 400;
}
/* Statistics Cards - Modern Glass with Icons - Centered Content */
.stats-card {
border: 1px solid var(--glass-border);
border-radius: var(--border-radius);
transition: var(--transition);
position: relative;
overflow: hidden;
height: 140px; /* Slightly taller */
background: var(--glass-bg);
backdrop-filter: blur(20px);
}
.stats-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 4px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
opacity: 0.9;
}
.stats-card:hover {
transform: translateY(-6px);
box-shadow: var(--shadow-lg);
border-color: rgba(152, 226, 63, 0.3);
}
.stats-card .card-body {
padding: 0.5rem;
position: relative;
z-index: 2;
height: 100%;
display: flex;
flex-direction: column;
justify-content: space-between;
align-items: center; /* Center horizontally */
text-align: center; /* Center text */
}
.stats-icon {
font-size: 2.5rem;
margin-bottom: 0.75rem;
opacity: 0.8;
transition: var(--transition);
/* Removed align-self: flex-start; now centered by parent */
}
.stats-card:hover .stats-icon {
color: var(--primary-color) !important;
transform: scale(1.1) rotate(5deg);
}
.stats-number {
font-size: 2.5rem;
font-weight: 800;
margin-bottom: 0.25rem;
color: var(--dark-text);
line-height: 1;
}
.stats-label {
font-weight: 600;
font-size: 0.95rem;
margin-bottom: 0.5rem;
color: var(--dark-text);
}
.stats-description {
font-size: 0.8rem;
opacity: 0.7;
color: var(--muted-text);
margin-top: auto;
}
/* Transactions Card - Modern Glass */
.transactions-card {
border: 1px solid var(--glass-border);
border-radius: var(--border-radius);
box-shadow: var(--shadow-sm);
background: var(--glass-bg);
backdrop-filter: blur(20px);
position: relative;
overflow: visible; /* Changed to visible to prevent dropdown clipping */
}
.transactions-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 4px;
height: 100%;
background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
z-index: 1;
}
.table {
margin-bottom: 0;
position: relative;
z-index: 2;
}
.table thead th {
border-bottom: 2px solid var(--border-color);
font-weight: 600;
color: var(--dark-text);
padding: 1.25rem 1rem;
background: rgba(248, 250, 252, 0.5);
border-radius: var(--border-radius) var(--border-radius) 0 0;
}
.table tbody td {
padding: 1.25rem 1rem;
border-bottom: 1px solid rgba(229, 231, 235, 0.5);
vertical-align: middle;
transition: var(--transition);
position: relative; /* Ensure dropdown positions correctly */
}
.table tbody tr:hover {
background: rgba(152, 226, 63, 0.05);
transform: scale(1.02);
box-shadow: var(--shadow-sm);
}
/* Status Badges - Modern Pills */
.status-badge {
padding: 0.5rem 1rem;
border-radius: 25px;
font-size: 0.8rem;
font-weight: 600;
text-transform: uppercase;
letter-spacing: 0.05em;
box-shadow: var(--shadow-sm);
transition: var(--transition);
}
.status-completed {
background: linear-gradient(135deg, var(--success-color), #059669);
color: white;
}
.status-pending {
background: linear-gradient(135deg, var(--warning-color), #d97706);
color: white;
}
.status-declined {
background: linear-gradient(135deg, var(--danger-color), #dc2626);
color: white;
}
.status-badge:hover {
transform: translateY(-1px);
box-shadow: var(--shadow-md);
}
/* Action Button - Modern Dots - Enhanced Visibility */
.action-btn {
border: none;
background: rgba(255, 255, 255, 0.5);
color: var(--muted-text);
padding: 0.75rem;
border-radius: 50%;
transition: var(--transition);
width: 3rem;
height: 3rem;
display: flex;
align-items: center;
justify-content: center;
backdrop-filter: blur(10px);
position: relative;
z-index: 10; /* Ensure button is above table */
}
.action-btn:hover {
background: rgba(152, 226, 63, 0.2);
color: var(--primary-color);
transform: rotate(90deg) scale(1.1);
box-shadow: var(--shadow-sm);
z-index: 15; /* Higher on hover */
}
.dropdown-menu {
z-index: 1060; /* High z-index for dropdown visibility */
overflow: visible; /* Prevent clipping */
}
/* CTA Buttons - Modern Gradient with Black Text */
.btn-cta {
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
border: none;
color: #000; /* Black text */
padding: 0.875rem 1.75rem;
border-radius: var(--border-radius);
font-weight: 600;
transition: var(--transition);
text-decoration: none;
display: inline-flex;
align-items: center;
gap: 0.5rem;
box-shadow: var(--shadow-sm);
}
.btn-cta:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-md);
color: #000; /* Black text on hover */
text-decoration: none;
}
.btn-outline-cta {
border: 1px solid var(--primary-color);
color: #000; /* Black text */
background: transparent;
padding: 0.75rem 1.5rem;
border-radius: var(--border-radius);
font-weight: 600;
transition: var(--transition);
display: inline-flex;
align-items: center;
gap: 0.5rem;
}
.btn-outline-cta:hover {
background: var(--primary-color);
color: #000; /* Black text on hover */
transform: translateY(-1px);
box-shadow: var(--shadow-sm);
}
/* Pagination - Modern Dots */
.pagination .page-link {
border: 1px solid var(--border-color);
color: var(--dark-text);
padding: 0.75rem 1rem;
margin: 0 0.25rem;
border-radius: 50%;
width: 45px;
height: 45px;
display: flex;
align-items: center;
justify-content: center;
transition: var(--transition);
font-weight: 600;
}
.pagination .page-link:hover {
background: var(--primary-color);
color: #000; /* Black text */
border-color: var(--primary-color);
transform: translateY(-2px) scale(1.05);
}
.pagination .page-item.active .page-link {
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
border-color: var(--primary-color);
box-shadow: var(--shadow-sm);
color: #000; /* Black text */
transform: scale(1.05);
}
/* Empty States - Modern Illustration Style */
.empty-state {
text-align: center;
padding: 4rem 2rem;
border-radius: var(--border-radius);
background: linear-gradient(135deg, rgba(152, 226, 63, 0.05) 0%, rgba(122, 184, 44, 0.05) 100%);
border: 1px solid rgba(152, 226, 63, 0.2);
box-shadow: var(--shadow-sm);
}
.empty-state-icon {
font-size: 4rem;
color: var(--primary-color);
margin-bottom: 1.5rem;
opacity: 0.6;
transition: var(--transition);
display: block;
}
.empty-state:hover .empty-state-icon {
transform: scale(1.1) rotate(10deg);
}
/* Responsive - Enhanced Mobile */
@media (max-width: 768px) {
.dashboard-header {
padding: 1.5rem;
margin-bottom: 1.5rem;
    }
.welcome-title {
font-size: 1.75rem;
    }
.stats-card .card-body {
padding: 1.25rem;
    }
.stats-number {
font-size: 2rem;
    }
.stats-icon {
font-size: 2.25rem;
    }
.table-responsive {
border-radius: var(--border-radius);
box-shadow: var(--shadow-sm);
    }
.balance-display {
margin-top: 1rem;
width: 100%;
padding: 1.5rem;
    }
.balance-amount {
font-size: 2rem;
    }
.donut-chart-container {
width: 80px;
height: 80px;
    }
}
@media (max-width: 576px) {
.dashboard-header {
padding: 1rem;
    }
.welcome-title {
font-size: 1.5rem;
    }
.stats-card .card-body {
padding: 1rem;
    }
.table thead {
display: none;
    }
.table tbody tr {
display: block;
border: 1px solid var(--border-color);
border-radius: var(--border-radius);
margin-bottom: 1rem;
padding: 1.25rem;
background: var(--glass-bg);
backdrop-filter: blur(10px);
box-shadow: var(--shadow-sm);
position: relative;
    }
.table tbody td {
display: block;
border: none;
padding: 0.75rem 0;
text-align: left;
position: relative;
    }
.table tbody td:before {
content: attr(data-label) ": ";
font-weight: 700;
color: var(--dark-text);
display: block;
margin-bottom: 0.25rem;
    }
/* Two items per row on mobile for forms/tables where applicable */
.row.g-3 > div {
flex: 0 0 100%;
max-width: 100%;
    }
}
/* Utility Classes - Enhanced */
.gradient-primary {
background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
}
.text-gradient {
background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}
</style>
<section class="dashboard-section body-collapse">
<div class="overlay pt-4">
<div class="container-fluid px-3 px-md-4">
<!-- Enhanced Header with Modern Layout -->
<div class="dashboard-header mb-4">
<div class="row g-4">
<!-- Welcome and Quick Actions -->
<div class="col-12 col-lg-6">
<h1 class="welcome-title"><i class="fas fa-wallet me-2"></i>Welcome back, {{ user.first_name|title }}!</h1>
<p class="welcome-subtitle">Here's what's happening with your finances today.</p>
</div>
<!-- Quick Actions Buttons -->
<div class="col-12 col-lg-6 text-lg-end mt-3 mt-lg-0">
<a href="{% url 'expense:submit_expense' %}" class="btn-cta me-2 me-lg-3 mb-2 mb-lg-0">
<i class="fas fa-plus"></i> New Request
</a>
<a href="" class="btn-outline-cta">
<i class="fas fa-exchange-alt"></i> Transfer
</a>
</div>
</div>
<!-- Balance and Charts Row - Two Items Per Row -->
<div class="row g-4 mt-4">
<!-- Wallet Balance -->
<div class="col-12 col-md-6">
<div class="balance-display">
<h5 class="mb-1 text-primary">{{ kyc.company_name|title }} Spendy Wallet</h5>
<p class="text-muted mb-0 small">Available Balance</p>
<div class="balance-amount">
                                KES {{ primary_wallets.balance|default:0|intcomma }}
</div>
<small class="text-success"><i class="fas fa-arrow-up me-1"></i> +2.5% this month</small>
</div>
</div>
<!-- Money In/Out Charts - Two Mini Donuts -->
<div class="col-12 col-md-6">
<div class="row g-3 h-100 align-items-center justify-content-center">
<!-- Money In -->
<div class="col-6 text-center">
<h6 class="text-primary mb-2 fw-semibold">Total In</h6>
<div class="donut-chart-container">
<canvas id="moneyInChart"></canvas>
</div>
<p class="mb-0 text-success fw-bold mt-2">KES {{ total_in|default:0|intcomma }}</p>
<small class="text-muted">This month</small>
</div>
<!-- Money Out -->
<div class="col-6 text-center">
<h6 class="text-danger mb-2 fw-semibold">Total Out</h6>
<div class="donut-chart-container">
<canvas id="moneyOutChart"></canvas>
</div>
<p class="mb-0 text-danger fw-bold mt-2">KES {{ total_out|default:0|intcomma }}</p>
<small class="text-muted">This month</small>
</div>
</div>
</div>
</div>
</div>
            {% if form.errors %}
<div class="alert alert-danger border-0 rounded-3 mb-4" style="background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); box-shadow: var(--shadow-sm);">
<i class="fas fa-exclamation-triangle me-2"></i>
<strong>{{ form.errors }}</strong>
</div>
            {% endif %}
<!-- Enhanced Statistics Cards - Two Per Row on Desktop -->
<div class="mb-5">
<div class="d-flex justify-content-between align-items-center mb-4">
<div>
<h2 class="section-title"><i class="fas fa-chart-pie me-2"></i>Request Overview</h2>
<p class="section-subtitle">Track your expense request status at a glance</p>
</div>
<a href="{% url 'expense:expense_approvals' %}" class="btn-outline-cta">
<i class="fas fa-eye me-1"></i>View Details
</a>
</div>
<div class="row g-4">
<!-- Row 1: Total & Pending -->
<div class="col-12 col-md-6 col-lg-3">
<div class="stats-card gradient-primary text-black">
<div class="card-body text-center">
<i class="fas fa-chart-line stats-icon"></i>
<div class="stats-number">{{ total_requests|default:0 }}</div>
<p class="stats-label mb-3">Total Requests</p>
<small class="stats-description opacity-90">All time</small>
</div>
</div>
</div>
<div class="col-12 col-md-6 col-lg-3">
<div class="stats-card" style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);">
<div class="card-body text-center">
<i class="fas fa-clock stats-icon text-warning"></i>
<div class="stats-number">{{ pending_requests|default:0 }}</div>
<p class="stats-label mb-3">Pending</p>
<small class="stats-description">Awaiting approval</small>
</div>
</div>
</div>
<!-- Row 2: Completed & Declined -->
<div class="col-12 col-md-6 col-lg-3">
<div class="stats-card" style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);">
<div class="card-body text-center">
<i class="fas fa-check-circle stats-icon text-success"></i>
<div class="stats-number">{{ completed_requests|default:0 }}</div>
<p class="stats-label mb-3">Completed</p>
<small class="stats-description">Processed successfully</small>
</div>
</div>
</div>
<div class="col-12 col-md-6 col-lg-3">
<div class="stats-card" style="background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);">
<div class="card-body text-center">
<i class="fas fa-times-circle stats-icon text-danger"></i>
<div class="stats-number">{{ declined_requests|default:0 }}</div>
<p class="stats-label mb-3">Declined</p>
<small class="stats-description">Rejected items</small>
</div>
</div>
</div>
</div>
</div>
<!-- Enhanced Transactions Section -->
<div class="row">
<div class="col-12">
<div class="transactions-card p-4">
<div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4">
<div>
<h2 class="section-title"><i class="fas fa-history me-2"></i>Recent Payments</h2>
<p class="section-subtitle">Your latest transaction activity</p>
</div>
<a href="{% url 'wallet:transactions' %}" class="btn-cta mt-2 mt-sm-0">
<span>View All Transactions</span>
<i class="fas fa-arrow-right ms-2"></i>
</a>
</div>
<div class="table-responsive">
<table class="table table-hover align-middle">
<thead>
<tr>
<th>Initiated By</th>
<th>Recipient</th>
<th>M-Pesa Code</th>
<th>Date & Time</th>
<th>Status</th>
<th>Amount</th>
<th width="60">Actions</th>
</tr>
</thead>
<tbody>
                                    {% for s in transactions %}
<tr>
<td data-label="Initiated By">
<div>
<div class="fw-semibold">{{ s.sender|title }}</div>
<small class="text-muted">{{ s.transaction_type|title }}</small>
</div>
</td>
<td data-label="Recipient">
<div class="fw-semibold">{{ s.receiver|title }}</div>
</td>
<td data-label="M-Pesa Code">
<div class="fw-medium">{{ s.mpesa_code }}</div>
</td>
<td data-label="Date & Time">
<div class="fw-medium">{{ s.date|date:"h:i A" }}</div>
<small class="text-muted">{{ s.date|date:"M d, Y" }}</small>
</td>
<td data-label="Status">
<span class="status-badge {% if s.status == 'completed' %}status-completed {% elif s.status == 'pending' %}status-pending {% else %}status-declined{% endif %}">
                                                {{ s.status|title }}
</span>
</td>
<td data-label="Amount" class="fw-bold text-danger">
                                            -KES {{ s.amount|intcomma }}
</td>
<td data-label="Actions">
<div class="dropdown">
<button class="action-btn" type="button" id="dropdownMenuButton{{ s.id }}" data-bs-toggle="dropdown" aria-expanded="false">
<i class="fas fa-ellipsis-v"></i>
</button>
<ul class="dropdown-menu custom-dropdown-menu" aria-labelledby="dropdownMenuButton{{ s.id }}">
<li>
<a class="dropdown-item d-flex align-items-center" href="#" data-bs-toggle="modal" data-bs-target="#viewTransactionModal{{ s.id }}">
<i class="fas fa-eye me-2 text-info"></i>View Details
</a>
</li>
<li><hr class="dropdown-divider"></li>
<li>
<a class="dropdown-item d-flex align-items-center text-danger" href="#">
<i class="fas fa-download me-2"></i>Download Receipt
</a>
</li>
</ul>
</div>
</td>
</tr>
                                    {% include 'partials/transaction_modals.html' with transaction=s %}
                                    {% endfor %}
</tbody>
</table>
</div>
<!-- Modern Pagination -->
                        {% if transactions.paginator.num_pages > 1 %}
<nav aria-label="Transactions pagination" class="mt-4">
<ul class="pagination justify-content-center mb-0">
                                {% if transactions.has_previous %}
<li class="page-item">
<a class="page-link" href="?page={{ transactions.previous_page_number }}" aria-label="Previous">
<i class="fas fa-chevron-left"></i>
</a>
</li>
                                {% else %}
<li class="page-item disabled">
<span class="page-link"><i class="fas fa-chevron-left"></i></span>
</li>
                                {% endif %}
                                {% for num in transactions.paginator.page_range %}
                                {% if transactions.number == num %}
<li class="page-item active">
<span class="page-link">{{ num }}</span>
</li>
                                {% elif num > transactions.number|add:'-3' and num < transactions.number|add:'3' %}
<li class="page-item">
<a class="page-link" href="?page={{ num }}">{{ num }}</a>
</li>
                                {% endif %}
                                {% endfor %}
                                {% if transactions.has_next %}
<li class="page-item">
<a class="page-link" href="?page={{ transactions.next_page_number }}" aria-label="Next">
<i class="fas fa-chevron-right"></i>
</a>
</li>
                                {% else %}
<li class="page-item disabled">
<span class="page-link"><i class="fas fa-chevron-right"></i></span>
</li>
                                {% endif %}
</ul>
</nav>
                        {% endif %}
</div>
</div>
</div>
            {% if not transactions %}
<div class="row">
<div class="col-12">
<div class="empty-state">
<i class="fas fa-receipt-line empty-state-icon"></i>
<h5 class="mb-3 text-dark">No Transactions Yet</h5>
<p class="text-muted mb-4">Your payment history will appear here once you make your first transaction.</p>
<a href="" class="btn-cta">
<i class="fas fa-arrow-right me-2"></i>Make First Payment
</a>
</div>
</div>
</div>
            {% endif %}
</div>
</div>
</section>
<script>
// Initialize Modern Donut Charts
document.addEventListener('DOMContentLoaded', function() {
// Money In Chart
const moneyInCtx = document.getElementById('moneyInChart').getContext('2d');
new Chart(moneyInCtx, {
type: 'doughnut',
data: {
datasets: [{
data: [{{ total_in|default:0 }}, 1000], // Example data
backgroundColor: ['#98e23f', '#e5e7eb'],
borderWidth: 0,
cutout: '70%'
                }]
            },
options: {
responsive: true,
maintainAspectRatio: false,
plugins: { legend: { display: false } },
animation: { duration: 2000, easing: 'easeOutBounce' }
            }
        });
// Money Out Chart
const moneyOutCtx = document.getElementById('moneyOutChart').getContext('2d');
new Chart(moneyOutCtx, {
type: 'doughnut',
data: {
datasets: [{
data: [{{ total_out|default:0 }}, 1000], // Example data
backgroundColor: ['#ef4444', '#e5e7eb'],
borderWidth: 0,
cutout: '70%'
                }]
            },
options: {
responsive: true,
maintainAspectRatio: false,
plugins: { legend: { display: false } },
animation: { duration: 2000, easing: 'easeOutBounce' }
            }
        });
    });
</script>
{% endblock content %}